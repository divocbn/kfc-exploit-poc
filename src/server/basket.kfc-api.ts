export interface Basket {
  id: string
}

async function createBasket(id: string = "K685"): Promise<Basket> {
  const res = await fetch('https://api.kfc.de/baskets', {
    method: 'POST',
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      "channel": "Web",
      "device": "Desktop",
      "storeId": id,
      "disposition": "pickup",
      "collectionPoint": "instore",
      "fulfillment": {
        "asap": true
      },
      "items": []
    })
  })

  /**
   * No proper error handling
   * cause its a poc lol
   */
  if (!res.ok) {
    throw new Error('Failed to fetch basket.')
  }

  return res.json()
}

export const kfcBasketApi = {
  createBasket
}
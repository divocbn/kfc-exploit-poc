import { ProductCard } from "~/components/product/product-card";
import { kfc } from "~/server/generic-menu.kfc-api";

type Props = {
  searchParams?: {
    category: string,
  };
};

export default async function Products({
  searchParams
}: Props) {
  const menu = await kfc.getGenericMenu();
  const products = menu.categories[0]?.categories.filter(c => c.name == searchParams?.category)[0]?.products;

  return (
    <div className="flex flex-row gap-2 flex-wrap">
      {products?.map((product, index) =>
        <ProductCard
          key={index}
          title={product.dname.value}
          price={product.items[0]?.price ?? 0}
          image={`https://static.kfc.de/images/items/lg/${product.items[0]?.imageName}.jpg`}
        />
      )}
    </div>
  );
}
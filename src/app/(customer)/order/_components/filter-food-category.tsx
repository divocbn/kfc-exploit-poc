'use client';

import { useState } from "react";
import { useUpdateSearchParams } from "~/hooks/use-update-search-params";
import { capitalizeAfterSpace, cn } from "~/lib/utils";

type FilterFoodCategoryProps = {
  foodCategories: string[]
}

export default function FilterFoodCategory({ 
  foodCategories
}: FilterFoodCategoryProps) {
  const updateSearchParams = useUpdateSearchParams();

  /**
   * TODO: split to drizzzle
   */
  const [currentFoodCategory, setFoodCategory] = useState(foodCategories[0]);

  const selectFoodCategory = (foodCategory: string) => {
    setFoodCategory(foodCategory);

    updateSearchParams({
      category: foodCategory
    })
  }

  return (
    <div className="flex md:flex-col flex-row md:gap-2 gap-4 flex-wrap">
      {foodCategories.map((item, index) =>
        <p
          key={index}
          onClick={() => selectFoodCategory(item)}
          className={cn(
            "font-medium text-2xl flex flex-row gap-1 items-center cursor-pointer hover:opacity-75 hover:scale-95 transition-all",
            currentFoodCategory == item && "underline underline-offset-4 animate-pulse"
          )}>
          {capitalizeAfterSpace(item)}
        </p>
      )}
    </div>
  );
}